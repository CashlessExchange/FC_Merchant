{"version":3,"sources":["../../src/pages/search/search.module.ts","../../src/pages/search/search.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { SearchPage } from './search';\n\n@NgModule({\n  declarations: [\n    SearchPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SearchPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    SearchPage\n  ]\n})\nexport class SearchPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search/search.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController, Platform, ToastController} from 'ionic-angular';\nimport { Api } from '../../providers/api/api';\nimport { Item } from '../../models/item';\nimport { Items } from '../../providers/providers';\nimport { Storage } from '@ionic/storage';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-search',\n  templateUrl: 'search.html'\n})\nexport class SearchPage {\n\n  private merchid: string = \"\";\n  //private locationid: string = \"\";\n  private customer: any;\n  private certificates: any;\n  private logo: string = \"\";\n  private splitted: string[] = [];\n  //private certs: any = [];\n  private transactions: any[] = [];\n  private merch:any={\n    merchantlogo: this.logo\n  \n  };\n\n\n  constructor(\n    public platform: Platform,\n    private auth: Api,\n    private storage:Storage,\n    public navCtrl: NavController,\n    public toastctrl:ToastController,\n    public navParams: NavParams,\n    private loadingCtrl: LoadingController) {\n      \n    storage.get('merchant').then((val) => {\n      console.log('Your age is', val);\n      this.merchid = val;\n      \n    });\n    console.log(this.merchid);\n    this.getMerchantData();\n\n\n  }\n  async ionViewWillEnter() {\n\n    const loading = this.loadingCtrl.create({\n      spinner: 'hide',\n      content: `Please Wait..\n          \n          <div class=\"custom-spinner-container\">\n            <div class=\"custom-spinner-box\"></div>\n          </div>`\n    });\n\n    await this.getMerchantData();\n    \n    await this.laodTransactions();\n    \n    loading.dismiss();\n  }\n\n  async readCustomerData() {\n\n    //await this.storage.ready().then((data) => {\n    //  data.setItem('user-id', \"44\");\n    //});\n\n\n\n\n    let type = \"customer_data.php?customerid=\" + this.merchid;\n    console.log(type);\n    this.customer = await this.auth.serviceFreedom(\"\", type);\n    console.log(this.customer);\n\n  }\n\n\n  async getMerchantData() {\n\n    let databasecreds = {\n      username: \"merchantbackuser\",\n      password: \"150498AV\",\n      reference: \"\",\n      token: \"\",\n      id: this.merchid\n    };\n    console.log(databasecreds);\n\n    let merch: any = await this.auth.serviceTransaction(databasecreds, \"?getMerchant=\" + \"99\");\n    console.log(merch);\n\n    this.merch.merchantname = merch.name;\n    if (merch.logo != undefined) {\n\n      this.merch.merchtlogo = merch.logo;\n    }\n    this.merch.merchantaddress = merch.address;\n    this.merch.merchantmail = merch.mail;\n\n  }\n\n\n\n  async laodTransactions() {\n\n\n\n    let databasecreds = {\n      username: \"freedom-app\",\n      password: \"150498AV\",\n      reference: \"\",\n      merchantid: this.merchid,\n      token: \"\"\n    };\n    console.log(databasecreds);\n\n    let trans: any = await this.auth.serviceTransaction(databasecreds, \"?getTransactionsMerch=\" + \"99\");\n    console.log(trans.results);\n\n    \n    this.transactions = trans.results;\n    if (this.transactions != undefined) {\n\n      let length = this.transactions.length;\n      if (length > 5) {\n        console.log(this.transactions.slice(length - 4, length));\n        this.transactions = this.transactions.slice(length - 4, length);\n      }\n    }\n\n\n  }\n\n\n  filter(value: string) {\n    if (value === \"1\") {\n      return \"yes\";\n    }\n    else {\n      return \"no\";\n    }\n  }\n\n  addPoint(num) {\n    console.log(num);\n    let temp = num.toString();\n    if (temp.length === 1) {\n      temp = \"0.0\" + temp;\n    } else if (temp.length === 2) {\n      temp = \"0.\" + temp;\n    }\n    else {\n      let lengthnum = temp.length;\n      temp = temp.substring(0, lengthnum - 2) + \".\" + temp.substring(lengthnum - 2, lengthnum);\n    }\n    return temp;\n  }\n\n  exit(){\n    console.log(\"exit\");\n    let toast = this.toastctrl.create({\n      message: 'You have been succesfully logged out',\n      duration: 3000,\n      position: 'top'\n    });\n    toast.present();\n    this.navCtrl.setRoot('LoginPage');\n  \n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search/search.ts"],"sourceRoot":""}